---
redirect_from:
  - "/aspect-installation"
interact_link: content/ASPECT_installation.ipynb
kernel_name: python3
kernel_path: content
has_widgets: false
title: |-
  ASPECT installation on Hamilton
pagenum: 1
prev_page:
  url: /Hamilton_from_own_computer.html
next_page:
  url: /Starting_with_ASPECT.html
suffix: .ipynb
search: aspect hamilton installation terminal version need using linux install command run deal ii computer should option following created disk machine software access here standard modify installed space yourself line typically system os jeroen van hunen models already not page own hamiltonfromowncomputer html only probably take different code pre data commands plan top still significantly found opening well cluster done remotely set open black windows where username cis local modules last check allowance folder debug release community dur ac uk du png before opened assume such please refer accessing unless major upgrades throughout year modifying once depending couple hours options planning

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"><div id="page-title">ASPECT installation on Hamilton</div>
</div>
    
<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="http://community.dur.ac.uk/jeroen.van-hunen/ASPECT/DU.png" alt=""></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ASPECT-installation">ASPECT installation<a class="anchor-link" href="#ASPECT-installation"> </a></h2><p>Before we can run models with ASPECT, we first need to install the software. For this, you will need a terminal opened on Hamilton. I will assume that you have already access to such terminal. If not, please refer to the page <a href="./Hamilton_from_own_computer.html">Accessing Hamilton from your own computer</a>.</p>
<p>Unless there are some major upgrades throughout the year, or if you are modifying ASPECT, you should have to install ASPECT only once. Depending on the installation version, this will probably take up to a couple of hours.</p>
<p>Here are the different options:</p>
<ul>
<li>If you will use a standard version of ASPECT, and are not planning to modify the code, the easiest option is to use a pre-installed version of ASPECT. If so, you could use the following installation on hamilton, which was created on 10th October, 2019: <code>/ddn/data/dgl6jv1/public/aspect</code>. You can copy this over to your allocated disk space on Hamilton with the following commands:</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">ddn</span><span class="o">/</span><span class="n">data</span><span class="o">/^</span><span class="n">username</span><span class="o">^/</span>
<span class="n">mkdir</span> <span class="n">ASPECT</span>
<span class="n">cd</span> <span class="n">ASPECT</span>
<span class="n">cp</span> <span class="o">/</span><span class="n">ddn</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">dgl6jv1</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">aspect</span> <span class="o">.</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>If you plan to modify ASPECT, or if you want to install a non-standard version of Hamilton, you will need to install it yourself. ASPECT is built on top of a finite element software tool <code>deal.ii</code>, which is installed separately. Even if you plan to modify ASPECT, it is likely that you will still use a standard <code>deal.ii</code> version. On Hamilton, there is a <code>deal.ii</code> installation version 9.0.0, and using this pre-installed version of <code>deal.ii</code> rather than installing it yourself will significantly reduces the installation time and complexity. This approach is described further down on this page.</li>
<li>Finally, there is the option to install everything (deal.ii and ASPECT) yourself. Phil Heron has created an installation guide for that, which can be found <a href="https://philheron.com/aspect-hamilton/">here</a>. </li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Opening-a-command-line-'terminal'">Opening a command line 'terminal'<a class="anchor-link" href="#Opening-a-command-line-'terminal'"> </a></h2><p>Installation of ASPECT (as well as setting up and running ASPECT models) on Durham's Linux cluster Hamilton is typically done using the command line: a text terminal with which you can navigate through the computer system, and execute commands. Since we can only access Hamilton remotely, we will need to set up this terminal facility remotely too. The way to do this will depend on the computer system you have access to.</p>
<ul>
<li>Linux OS: If you are using a Linux operating system, you are probably already familiar with command line terminals. If you use one of the computer room computers on the campus that has the option to boot with a linux OS, then you can open a terminal window by clicking on the black 'terminal' screen in top task bar, but if you are using your own linux machine with a different linux flavour, opening a terminal might be done differently.  </li>
<li>With Mac OS, click the 'Launchpad' (black rocket symbol), then 'Other', then 'Terminal'</li>
<li>Using Windows, the best way is to use the <code>X2Go</code> software, and more information on this can be found <a href="./Hamilton_from_own_computer.html">here</a>.</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Logging-onto-Hamilton">Logging onto Hamilton<a class="anchor-link" href="#Logging-onto-Hamilton"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ssh</span> <span class="o">-</span><span class="n">X</span> <span class="o">^</span><span class="n">username</span><span class="o">^</span><span class="nd">@hamilton</span><span class="o">.</span><span class="n">dur</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>(where <code>^username^</code> should be replaced with your CIS username), and provide your CIS password. (Note that the <code>-X</code> option will allow the remote machine (i.e. Hamilton) to open windows on the machine that the terminal is run from (either <code>mira</code> or your local linux machine)). You should now be logged into the Hamilton HPC cluster.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Settings">Settings<a class="anchor-link" href="#Settings"> </a></h2><p>The following modules need to be loaded for the installation to run properly. Last check that all modules were still available was on 11-1-2020.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">module</span><span class="o">-</span><span class="n">git</span> <span class="n">gcc</span><span class="o">/</span><span class="mf">4.9</span><span class="o">.</span><span class="mi">1</span> <span class="n">cmake</span><span class="o">/</span><span class="mf">3.6</span><span class="o">.</span><span class="mi">2</span> <span class="n">lapack</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="mf">3.5</span><span class="o">.</span><span class="mi">0</span> <span class="n">zlib</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="mf">1.2</span><span class="o">.</span><span class="mi">7</span> <span class="n">sge</span><span class="o">/</span><span class="n">current</span> <span class="n">openmpi</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="mf">2.1</span><span class="o">.</span><span class="mi">1</span> <span class="n">gsl</span><span class="o">/</span><span class="n">gcc</span><span class="o">/</span><span class="mi">64</span><span class="o">/</span><span class="mf">1.15</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following variables need to be set (again, last checked on 11-1-2020). For the Cshell:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">setenv</span> <span class="n">CC</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">Cluster</span><span class="o">-</span><span class="n">Apps</span><span class="o">/</span><span class="n">openmpi</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="mf">4.9</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="mf">2.1</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mpicc</span>
<span class="n">setenv</span> <span class="n">CXX</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">Cluster</span><span class="o">-</span><span class="n">Apps</span><span class="o">/</span><span class="n">openmpi</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="mf">4.9</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="mf">2.1</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mpicxx</span>
<span class="n">setenv</span> <span class="n">FC</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">Cluster</span><span class="o">-</span><span class="n">Apps</span><span class="o">/</span><span class="n">openmpi</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="mf">4.9</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="mf">2.1</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mpif90</span>
<span class="n">setenv</span> <span class="n">FF</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">Cluster</span><span class="o">-</span><span class="n">Apps</span><span class="o">/</span><span class="n">openmpi</span><span class="o">/</span><span class="n">gcc</span><span class="o">-</span><span class="mf">4.9</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="mf">2.1</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mpif77</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For bash:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">export</span> <span class="n">CC</span><span class="o">=</span><span class="n">mpicc</span><span class="p">;</span> <span class="n">export</span> <span class="n">CXX</span><span class="o">=</span><span class="n">mpicxx</span><span class="p">;</span> <span class="n">export</span> <span class="n">FC</span><span class="o">=</span><span class="n">mpif90</span><span class="p">;</span> <span class="n">export</span> <span class="n">FF</span><span class="o">=</span><span class="n">mpif77</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Downloading-ASPECT">Downloading ASPECT<a class="anchor-link" href="#Downloading-ASPECT"> </a></h2><p>Using the <code>quota</code> command on Hamilton, you can check your disk space allowance. Typically, you have an allowance on the <code>home</code> disk and the <code>data</code> disk, with the latter having significantly more space, so this is where we will install Hamilton:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">ddn</span><span class="o">/</span><span class="n">data</span><span class="o">/^</span><span class="n">username</span><span class="o">^/</span>
<span class="n">mkdir</span> <span class="n">ASPECT</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">geodynamics</span><span class="o">/</span><span class="n">aspect</span><span class="o">.</span><span class="n">git</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This will create a local <code>aspect</code> folder. Enter the folder, prepare the installation and run the installation:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cd</span> <span class="n">aspect</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">DDEAL_II_DIR</span><span class="o">=/</span><span class="n">ddn</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">dgl6jv1</span><span class="o">/</span><span class="n">Progs</span><span class="o">/</span><span class="n">ASPECT_20181001</span><span class="o">/</span><span class="n">deal</span><span class="o">.</span><span class="n">ii</span><span class="o">-</span><span class="n">candi</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">deal</span><span class="o">.</span><span class="n">II</span><span class="o">-</span><span class="n">v9</span><span class="o">.</span><span class="mf">0.0</span> <span class="o">-</span><span class="n">DCMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">release</span> <span class="o">.</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j12</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Don't forget the <code>.</code> at the end of the <code>cmake</code> command. The <code>make</code> command will run the installation in parallel on 12 cores to speed up the installation. Typically this should take around 10 minutes or so. If all oes well, an executable file <code>aspect</code> will be created. This is a comilation in the 'debug' mode, which produces a lot of output, and is therefore using for experimenting with the code. But for a (significant) speedup, a 'release' version will need to be created. So if you prefer to keep the 'debug' version, rename it, and then comile the 'release' version:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">make</span> <span class="n">release</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j12</span>
</pre></div>

</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Jeroen van Hunen, April 2020</em></p>

</div>
</div>
</div>
</div>

 


    </main>
    